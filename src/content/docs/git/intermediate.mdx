---
title: Git, GitHubの使い方ガイド (中級編)
description: ブランチ戦略、コンフリクト解消、プルリクエストなど、より実践的なGit・GitHubの運用方法を解説します。
---

import { Steps, Aside } from '@astrojs/starlight/components';

## はじめに

[初級編](/git/beginner)でGitとGitHubの基本的な操作に慣れたら、次はチームでよりスムーズに開発を進めるためのテクニックを学びましょう。
このページでは、「あしたぼホームページ」開発で推奨されるブランチの運用方法、やっかいな「コンフリクト」の解決方法、そして品質を保つための「プルリクエスト」の活用について、VS CodeのGUI操作を中心に解説します。

## あしたぼホームページのブランチ運用ルール

「あしたぼホームページ」プロジェクトでは、以下のようなブランチ運用を基本とします。

-   **`main` ブランチ**:
    -   常に本番環境で動いている、または動かせる安定した状態のコードが置かれています。
    -   **このブランチに直接コミットすることは原則禁止です！**
    -   `develop-main` ブランチから、リリース準備が整ったタイミングでマージされます。

-   **`develop-main` ブランチ**:
    -   開発のメインとなるブランチです。
    -   新しい機能や修正は、一度このブランチにまとめられてからテストされます。
    -   個々の開発作業は、このブランチから作成した「フィーチャーブランチ」で行います。

-   **フィーチャーブランチ (作業用ブランチ)**:
    -   新しい機能の開発や、特定のバグ修正など、個別のタスクごとに作成するブランチです。
    -   必ず `develop-main` ブランチから作成します。
    -   ブランチ名は、作業内容が分かりやすいように命名します。
        -   機能追加: `feature/機能名` (例: `feature/user-profile-page`)
        -   バグ修正: `fix/修正箇所-内容` (例: `fix/login-button-style`)
        -   その他: `refactor/改善箇所`, `docs/ドキュメント名` など
    -   作業が完了したら、`develop-main` ブランチへのプルリクエストを作成し、レビューを経てマージされます。マージ後は基本的に削除します。

{/* ここに「main, develop-main, featureブランチの関係を示す図」を挿入 */}
{/* 例：main ← develop-main ← feature/xxx の流れ */}

<Aside type="note">
このブランチ運用は一般的な「Git Flow」や「GitHub Flow」を参考にしたものです。プロジェクトの状況によってルールが変更される可能性もあるので、常に最新の情報を確認するようにしましょう。
</Aside>

## コンフリクトの恐怖と克服

複数人で同じファイルを編集していると、Gitが自動で変更を統合できない「コンフリクト（衝突）」が発生することがあります。
これはエラーではなく、Gitが「どっちの変更が正しいか教えて！」とあなたに助けを求めている状態です。

### コンフリクトが発生する主なケース
-   自分と他の人が、同じファイルの同じ行を別々に変更してプッシュしようとしたとき。
-   他の人の変更をプルした際に、自分のローカルでの変更と衝突したとき。

### VS Codeでのコンフリクト解消手順

<Steps>
1.  **コンフリクトの発生**
    プル操作やマージ操作を行った際にコンフリクトが発生すると、VS Codeは問題のあるファイルにその旨を表示します。ソース管理パネルでも、ファイルが「マージの競合」セクションに表示されます。
    {/* ここに「VS Codeでコンフリクトが発生した状態」のスクリーンショットを挿入 */}
    {/* 例：public/assets/images/git/vscode-conflict-detected.png */}

2.  **コンフリクトエディタを開く**
    コンフリクトが発生しているファイルを開くと、VS Codeは専用のコンフリクトエディタを表示します。
    エディタには、あなたの変更（現在の変更）、他の人の変更（入力側の変更）、そして両者を比較できるビューが表示されます。
    {/* ここに「VS Codeのコンフリクトエディタ画面」のスクリーンショットを挿入 */}
    {/* 例：public/assets/images/git/vscode-conflict-editor.png */}

3.  **変更を選択する**
    コンフリクト箇所ごとに、どちらの変更を採用するか、あるいは両方を採用するかなどを選択します。
    -   **現在の変更を取り込む**: あなたが行った変更を採用します。
    -   **入力側の変更を取り込む**: 他の人が行った変更（プルやマージで取り込もうとしている変更）を採用します。
    -   **両方の変更を取り込む**: 両方の変更を（通常は順番に）採用します。
    -   **変更を比較**: 差分をより詳しく確認できます。
    VS Codeでは、これらの操作をボタンクリックで行えます。また、手動でコードを直接編集して、最終的に残したい形にすることも可能です。

4.  **解消の確認とステージング**
    すべてのコンフリクト箇所で適切な変更を選択・編集したら、ファイルを保存します。
    その後、ソース管理パネルで、解消したファイルをステージングします（「＋」アイコンをクリック）。

5.  **コミット**
    コンフリクトの解消が完了したら、その旨を示すコミットメッセージ（例: `fix: Merge conflict in login.tsx`）を入力し、コミットします。
    これでコンフリクトの解消は完了です。

</Steps>

<Aside type="danger">
コンフリクトの解消は慎重に行いましょう。誤った変更を採用してしまうと、バグの原因になったり、他の人の作業を上書きしてしまったりする可能性があります。不安な場合は、一人で解決しようとせず、必ず他の開発メンバーに相談してください。
</Aside>

## プルリクエスト (PR) を活用したコードレビュー

フィーチャーブランチでの作業が完了したら、その変更を `develop-main` ブランチに取り込んでもらうために「プルリクエスト（PR）」を作成します。
PRは、単に変更をマージするためのお願いだけでなく、**コードレビュー**を通じてソフトウェアの品質を高めるための重要なプロセスです。

### プルリクエスト作成時のポイント

[初級編](/git/beginner#基本的な開発の流れ-vs-codeのgui操作)でPRの基本的な作成手順は説明しましたが、ここではより良いPRにするためのポイントを紹介します。

-   **分かりやすいタイトル**: PRのタイトルは、変更内容が一目で分かるように具体的に記述しましょう。
    -   例: `feat: ユーザーアイコンアップロード機能の追加`
    -   例: `fix: 予約カレンダーの表示崩れを修正 (IE11対応)`
-   **詳細な説明**:
    -   どのような変更を行ったのか？ (What)
    -   なぜその変更が必要だったのか？ (Why)
    -   どのように変更したのか？ (How)
    -   関連するIssueがあれば、その番号を記載する (例: `Closes #123`)。
    -   UIの変更がある場合は、スクリーンショットやGIFを添付するとレビューしやすくなります。
-   **適切なレビュアーを指定する**: プロジェクトのルールに従って、レビューしてほしい人をレビュアーに指定します。
-   **セルフレビュー**: PRを作成する前に、自分自身で変更内容を見直しましょう。誤字脱字、不要なコードの混入、デバッグ用コードの残存などがないか確認します。

{/* ここに「GitHubの良いプルリクエストの例」のスクリーンショットまたは説明図を挿入 */}

### レビューコメントへの対応

レビュアーからコメントや修正依頼が来たら、真摯に受け止め、対応しましょう。
-   指摘された箇所を修正したら、再度コミット＆プッシュします（PRは自動的に更新されます）。
-   修正が完了したら、その旨をコメントでレビュアーに伝えます。
-   疑問点があれば、遠慮なく質問しましょう。建設的な議論はコードの品質向上につながります。

すべての指摘事項が解消され、レビュアーから承認（Approve）が得られたら、PRはマージされる準備が整います。
マージ作業は、通常プロジェクトの管理者が行います。

## コミット履歴を綺麗に保つ (git pull --rebase)

チーム開発では、他のメンバーも頻繁に `develop-main` ブランチを更新します。
自分のフィーチャーブランチで作業中に `develop-main` の変更を取り込む際、単純に `git pull` (またはVS Codeの同期ボタン) を使うと、マージコミットが作られ、コミット履歴が複雑になることがあります。

そこで推奨されるのが `git pull --rebase` です。
これは、`develop-main` の最新の変更をまず取り込み、その上で自分のフィーチャーブランチの変更を「付け直す（リベースする）」操作です。これにより、コミット履歴が一直線になり、見通しが良くなります。

VS Codeで `git pull --rebase` を行うには、設定を変更するか、ターミナルでコマンドを直接実行する必要があります。
ターミナルでプロジェクトのルートディレクトリに移動し、以下のコマンドを実行します。
```bash
git pull --rebase origin develop-main
```
(現在のブランチがフィーチャーブランチで、`develop-main` からの変更を取り込みたい場合)

<Aside type="caution">
リベースはコミット履歴を書き換える強力な操作です。既に他の人と共有しているブランチ（例: `develop-main` や、他の人が作業しているフィーチャーブランチ）に対してリベースを行うのは避けましょう。原則として、**まだプッシュしていないローカルのコミットや、自分専用のフィーチャーブランチに対してのみ**使用します。
</Aside>

## まとめ

-   ブランチを適切に使い分けて、安全かつ効率的に開発を進めよう。
-   コンフリクトは恐れず、手順に従って冷静に対処しよう。不安ならすぐに相談！
-   プルリクエストは、コードの品質を高めるためのコミュニケーションの場。
-   `git pull --rebase` を活用して、コミット履歴を綺麗に保つことを意識しよう。

これらのテクニックを身につければ、あなたも立派なチーム開発者の一員です！
分からないことがあれば、[用語集](/getstart/term)を確認したり、[ヘルプページ](/git/help)を参照したり、遠慮なく周りのメンバーに質問してください。
